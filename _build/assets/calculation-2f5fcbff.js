import{b as m,g as p,i as l,S as V,t as f,d as Y,k as F,a as T,F as Z,r as B,u as D,e as W,s as X}from"./web-df183a61.js";/* empty css               */import{m as _,s as H,T as O,p as E}from"./signal-ebf1c0c7.js";import{T as o}from"./text-2f0fd6cd.js";import{P as q}from"./paymentItem-7882080b.js";import{P as z}from"./payInfoItem-e7d6582d.js";const G=f("<div class=alert>");function j(e){return m(V,{get when(){return e.trigger},get children(){const t=p(G);return l(t,()=>e.message),t}})}const J=f("<div class=wrap>"),K=f("<div class=ctn><div class=ctn_header><div class=title></div><button></button></div><div class=ctn_body><div class=member_list></div><form class=member_input><div class=wrap><input type=text><button type=submit></button></div></form></div><!$><!/>"),Q=f("<div class=guide>이름을 입력하고 [추가]버튼을 눌러보세요!"),ee=f("<button class=button_delete>"),te=f("<span class=item><span></span><!$><!/>");function ye(){const[e,t]=F({show:!1,message:""}),[i,n]=F(0);let s,c;const r=a=>{t({show:!0,message:a}),clearTimeout(c),c=setTimeout(()=>t({...e(),show:!1}),2e3)},u=a=>{a.preventDefault();const d=s.value.trim();if(d!==""){if(_.exist(d)){r(o.member.alert_duplicate);return}s.value="",_.add(d)}};return(()=>{const a=p(K),d=a.firstChild,x=d.firstChild,h=x.nextSibling,b=d.nextSibling,v=b.firstChild,C=v.nextSibling,I=C.firstChild,k=I.firstChild,M=k.nextSibling,L=b.nextSibling,[P,N]=T(L.nextSibling);return l(x,()=>o.member.title),h.$$click=()=>{_.count<2?r("2명 이상이어야 해요."):H(O.MONEY)},l(h,()=>_.count+o.member.button),b.$$click=()=>n(0),l(v,m(V,{get when(){return _.count!==0},get fallback(){return p(Q)},get children(){const g=p(J);return l(g,m(Z,{get each(){return _.list},children:y=>(()=>{const S=p(te),A=S.firstChild,R=A.nextSibling,[$,U]=T(R.nextSibling);return S.$$click=w=>{w.stopPropagation(),n(y.id)},l(A,()=>y.name),l(S,m(V,{get when(){return i()===y.id},get children(){const w=p(ee);return w.$$click=()=>_.delete(y.id),l(w,()=>o.member.button_delete),B(),w}}),$,U),B(),S})()})),g}})),C.addEventListener("submit",u),D(g=>s=g,k),l(M,()=>o.member.button_add),l(a,m(j,{get trigger(){return e().show},get message(){return e().message}}),P,N),W(()=>X(k,"placeholder",o.member.placeholder)),B(),a})()}Y(["click"]);const le=f("<div class=ctn><div class=ctn_header><div class=subtitle></div><div class=title></div><button></button></div><div class=payment_list><div class=table><span class=col_name></span><span class=col_member></span><span class=col_money></span></div><div class=items><!$><!/><div class=button_list><button class=button_add></button><button class=button_delete></button></div></div></div><!$><!/>"),ne=f("<div class=guide>결제 내역을 추가해보세요!");function xe(){const[e,t]=F(0),[i,n]=F(!1);let s;const c=()=>{n(!0),clearTimeout(s),s=setTimeout(()=>n(!1),2e3)};return(()=>{const r=p(le),u=r.firstChild,a=u.firstChild,d=a.nextSibling,x=d.nextSibling,h=u.nextSibling,b=h.firstChild,v=b.firstChild,C=v.nextSibling,I=C.nextSibling,k=b.nextSibling,M=k.firstChild,[L,P]=T(M.nextSibling),N=L.nextSibling,g=N.firstChild,y=g.nextSibling,S=h.nextSibling,[A,R]=T(S.nextSibling);return r.$$click=()=>t(0),a.$$click=()=>{confirm(o.money.backWarning)&&(E.reset(),H(O.MEMBER))},l(a,()=>o.money.back),l(d,()=>o.money.title),x.$$click=()=>{E.isValid()?H(O.RESULT):c()},l(x,()=>o.money.button),l(v,()=>o.money.label1),l(C,()=>o.money.label2),l(I,()=>o.money.label3),l(k,m(V,{get when(){return E.count!==0},get fallback(){return p(ne)},get children(){return m(Z,{get each(){return E.list},children:$=>m(q,{payment:$,get selected(){return e()===$.id},select:t})})}}),L,P),g.$$click=$=>{$.stopPropagation();const U=E.add(_.list.map(w=>w.id));t(U)},l(g,()=>o.money.button_add),y.$$click=$=>{$.stopPropagation(),t(0),E.delete()},l(y,()=>o.money.button_delete),l(r,m(j,{get trigger(){return i()},message:"채워지지 않은 정보가 있습니다."}),A,R),B(),r})()}Y(["click"]);const ie=f('<svg width=54 height=20 viewBox="0 0 54 20"fill=none xmlns=http://www.w3.org/2000/svg><path d="M16 9.5C15.7239 9.5 15.5 9.72386 15.5 10C15.5 10.2761 15.7239 10.5 16 10.5V9.5ZM38 10L33 7.11325V12.8868L38 10ZM16 10.5H33.5V9.5H16V10.5Z"fill=black>');function se(){return p(ie)}const ce=f("<div class=sending_item><div class=col_flexible></div><!$><!/><div class=col_flexible></div><div class=col_money><!$><!/><!$><!/>");function ae(e){return(()=>{const t=p(ce),i=t.firstChild,n=i.nextSibling,[s,c]=T(n.nextSibling),r=s.nextSibling,u=r.nextSibling,a=u.firstChild,[d,x]=T(a.nextSibling),h=d.nextSibling,[b,v]=T(h.nextSibling);return l(i,()=>_.name(e.sending.from)),l(t,m(se,{}),s,c),l(r,()=>_.name(e.sending.to)),l(u,()=>String(e.sending.money).replace(/(\d)(?=(?:\d{3})+(?!\d))/g,"$1,"),d,x),l(u,()=>` ${o.paymentItem.moneyUnit}`,b,v),t})()}const oe=()=>{const e=re(),t=ue(e),i=[];return t.forEach(n=>{i.push(...$e(n))}),[e,i]},re=()=>{let e=_.list.map(t=>({mid:t.id,pay:[],use:[],money:0,bonus:0,included:!1}));return E.list.forEach(({id:t,payer:i,money:n,members:s})=>{const c=s.length,r=(c-n%c)%c,u=(n+r)/c;e=e.map(a=>a.mid===i?{...a,pay:[...a.pay,{pid:t,money:n}],bonus:a.bonus+r}:a),s.forEach(a=>{e=e.map(d=>d.mid===a?{...d,use:[...d.use,{pid:t,money:u}]}:d)})}),e=e.map(t=>({...t,money:t.use.reduce((i,n)=>i+n.money,0)-t.pay.reduce((i,n)=>i+n.money,0)-t.bonus})),e},de=e=>{const t=[[]];for(let i=0;i<e;i++){const n=t.length;for(let s=0;s<n;s++){const c=t[s];t.push([...c,i])}}return t},ue=e=>{const t=[],i=de(e.length);for(let n=1;n<i.length;n++){const s=i[n];if(!me(e,s))continue;const c=[];s.forEach(r=>{e[r].included=!0,c.push(e[r])}),t.push(c)}return t},me=(e,t)=>{let i=0;for(let n=0;n<t.length;n++){if(e[t[n]].included)return!1;i+=e[t[n]].money}return i===0},$e=e=>{const t=[];e.sort((s,c)=>s.money<c.money?1:-1);const i=e[e.length-1];e.pop();for(let s=0;s<e.length;s++)e[0].money<=Math.abs(i.money)?n(e[0],i):n(e[0],e[e.length-1]),e.sort((c,r)=>c.money<r.money?1:-1);return t;function n(s,c){t.push({from:s.mid,to:c.mid,money:s.money}),c.money+=s.money,s.money=0}},_e=f("<div class=ctn><div class=ctn_header><div class=subtitle></div><div class=title></div></div><div class=ctn_body><div class=result_scroll><div class=ctn_sending><div class=table><span class=col_flexible></span><span> </span><span class=col_flexible></span><span class=col_money></span></div><div class=list></div><button>텍스트로 복사하기</button></div><div class=middle_title>아래 항목을 클릭해서 디테일한 정보를 확인해보세요.</div><div class=table><span class=col_flexible></span><span class=col_money></span><span class=col_money></span><span class=col_money></span></div><div class=list>");function Se(){const[e,t]=F(0),[i,n]=oe();console.log("payInfoList",i),console.log("sendingList",n);const s=async()=>{let c=n.reduce((r,u)=>{const a=_.name(u.from),d=_.name(u.to);return r+`${a} --> ${d} : ${u.money}원
`},`[N빵 정산 결과]

`);c+=`
(똑똑하게 정산하자! N-bread)`;try{await navigator.clipboard.writeText(c),alert("클립보드에 링크가 복사되었습니다.")}catch{alert("복사에 실패하였습니다")}};return(()=>{const c=p(_e),r=c.firstChild,u=r.firstChild,a=u.nextSibling,d=r.nextSibling,x=d.firstChild,h=x.firstChild,b=h.firstChild,v=b.firstChild,C=v.nextSibling,I=C.nextSibling,k=I.nextSibling,M=b.nextSibling,L=M.nextSibling,P=h.nextSibling,N=P.nextSibling,g=N.firstChild,y=g.nextSibling,S=y.nextSibling,A=S.nextSibling,R=N.nextSibling;return c.$$click=()=>t(0),u.$$click=()=>H(O.MONEY),l(u,()=>o.result.back),l(a,()=>o.result.title),l(v,()=>o.result.label1),C.style.setProperty("width","54px"),l(I,()=>o.result.label2),l(k,()=>o.result.label3),l(M,m(Z,{each:n,children:$=>m(ae,{sending:$})})),L.$$click=()=>s(),l(g,()=>o.result.label4),l(y,()=>o.result.label5),l(S,()=>o.result.label6),l(A,()=>o.result.label7),l(R,m(Z,{each:i,children:$=>m(z,{payInfo:$,get selected(){return e()===$.mid},selectInfo:t})})),B(),c})()}Y(["click"]);export{ye as M,Se as R,xe as a};
